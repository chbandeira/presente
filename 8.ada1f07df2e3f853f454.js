(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{CU7q:function(l,n,t){"use strict";t.r(n);var o=t("CcnG"),u=function(){return function(){}}(),e=t("9AJC"),a=t("pMnS"),r=t("iAfa"),i=t("RygT"),s=t("gIcY"),d=t("ue5t"),m=t("fKKE"),c=t("Ip0R"),p=t("BUTu"),g=t("AytR"),f=t("t/Na"),h=g.a.api+"/registros",v={headers:new f.h({"Content-Type":"application/json"})},b=function(){function l(l){this.http=l}return l.prototype.registrar=function(l){return this.http.post(h,{matricula:l.matricula,tipoRegistro:l.tipoRegistro},v)},l.ngInjectableDef=o.defineInjectable({factory:function(){return new l(o.inject(f.c))},token:l,providedIn:"root"}),l}(),C=function(l){return l[l.entrada=1]="entrada",l[l.saida=2]="saida",l}({}),R=t("5vhM"),_=function(){return function(l,n){this.tipoRegistro=l,this.matricula=n}}(),F=t("2WpN"),y=function(){function l(l,n,t,o){this.fb=l,this.route=n,this.registrosService=t,this.alunosService=o,this.formValidation=new R.a,this.title="Entrada"}return l.prototype.ngOnInit=function(){this.tipoRegistro=this.route.snapshot.params.tipoRegistro,this.startForm(),this.loadUrlFoto()},l.prototype.startForm=function(){this.submitForm=this.fb.group({matricula:[""]})},l.prototype.ngDoCheck=function(){this.tipoRegistro!==this.route.snapshot.params.tipoRegistro&&(this.tipoRegistro=this.route.snapshot.params.tipoRegistro,this.startForm(),this.formValidation.reset()),this.title=this.route.snapshot.params.tipoRegistro===C[C.saida]?"Sa\xedda":"Entrada"},l.prototype.registrar=function(){var l=this;if(this.loading=!0,!this.submitForm.value.matricula)return this.formValidation.invalidate("Informe a matr\xedcula para registro"),this.loading=!1,void(this.base64Image=null);this.matricula=this.submitForm.value.matricula;var n=new _(C[this.route.snapshot.params.tipoRegistro],this.submitForm.value.matricula);this.registrosService.registrar(n).pipe(Object(F.a)(function(){l.loading=!1,l.loadUrlFoto()})).subscribe(function(n){l.formValidation.validate(n.messageRetorno),l.startForm()},function(n){l.formValidation.invalidate(n.error.message)})},l.prototype.clean=function(){this.formValidation.reset(),this.loading=!1,this.base64Image=null},l.prototype.loadUrlFoto=function(){var l=this;if(this.matricula){var n=""+g.a.urlFotos+this.matricula+".jpg?"+(new Date).getTime();this.alunosService.getBase64ImageFromURL(n).subscribe(function(n){l.base64Image="data:image/jpg;base64,"+n})}},l}(),I=t("ZYCi"),x=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function k(l){return o["\u0275vid"](0,[(l()(),o["\u0275eld"](0,0,null,null,1,"div",[["class","form-group text-center"]],null,null,null,null,null)),(l()(),o["\u0275eld"](1,0,null,null,0,"img",[["class","img-fluid img-thumbnail"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,1,0,n.component.base64Image)})}function V(l){return o["\u0275vid"](0,[(l()(),o["\u0275eld"](0,0,null,null,2,"div",[["class","d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"]],null,null,null,null,null)),(l()(),o["\u0275eld"](1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),o["\u0275ted"](2,null,["Registro de ",""])),(l()(),o["\u0275eld"](3,0,null,null,1,"ngx-loading",[],null,null,null,r.b,r.a)),o["\u0275did"](4,114688,null,0,i.a,[i.c,o.ChangeDetectorRef],{show:[0,"show"]},null),(l()(),o["\u0275eld"](5,0,null,null,30,"form",[["class","mb-5"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,t){var u=!0;return"submit"===n&&(u=!1!==o["\u0275nov"](l,7).onSubmit(t)&&u),"reset"===n&&(u=!1!==o["\u0275nov"](l,7).onReset()&&u),u},null,null)),o["\u0275did"](6,16384,null,0,s["\u0275angular_packages_forms_forms_bh"],[],null,null),o["\u0275did"](7,540672,null,0,s.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),o["\u0275prd"](2048,null,s.ControlContainer,null,[s.FormGroupDirective]),o["\u0275did"](9,16384,null,0,s.NgControlStatusGroup,[[4,s.ControlContainer]],null,null),(l()(),o["\u0275eld"](10,0,null,null,25,"div",[["class","col-lg"]],null,null,null,null,null)),(l()(),o["\u0275eld"](11,0,null,null,13,"div",[["class","d-flex justify-content-center"]],null,null,null,null,null)),(l()(),o["\u0275eld"](12,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),o["\u0275eld"](13,0,null,null,1,"label",[["for","matricula"]],null,null,null,null,null)),(l()(),o["\u0275ted"](-1,null,["Matr\xedcula"])),(l()(),o["\u0275eld"](15,0,null,null,7,"input",[["class","form-control"],["formControlName","matricula"],["id","matricula"],["maxlength","20"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var u=!0;return"input"===n&&(u=!1!==o["\u0275nov"](l,16)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==o["\u0275nov"](l,16).onTouched()&&u),"compositionstart"===n&&(u=!1!==o["\u0275nov"](l,16)._compositionStart()&&u),"compositionend"===n&&(u=!1!==o["\u0275nov"](l,16)._compositionEnd(t.target.value)&&u),u},null,null)),o["\u0275did"](16,16384,null,0,s.DefaultValueAccessor,[o.Renderer2,o.ElementRef,[2,s.COMPOSITION_BUFFER_MODE]],null,null),o["\u0275did"](17,540672,null,0,s.MaxLengthValidator,[],{maxlength:[0,"maxlength"]},null),o["\u0275prd"](1024,null,s.NG_VALIDATORS,function(l){return[l]},[s.MaxLengthValidator]),o["\u0275prd"](1024,null,s.NG_VALUE_ACCESSOR,function(l){return[l]},[s.DefaultValueAccessor]),o["\u0275did"](20,671744,null,0,s.FormControlName,[[3,s.ControlContainer],[6,s.NG_VALIDATORS],[8,null],[6,s.NG_VALUE_ACCESSOR],[2,s["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,s.NgControl,null,[s.FormControlName]),o["\u0275did"](22,16384,null,0,s.NgControlStatus,[[4,s.NgControl]],null,null),(l()(),o["\u0275eld"](23,0,null,null,1,"small",[["class","form-text text-muted"]],null,null,null,null,null)),(l()(),o["\u0275ted"](-1,null,["Campo obrigat\xf3rio"])),(l()(),o["\u0275eld"](25,0,null,null,1,"app-message-form",[],null,null,null,d.b,d.a)),o["\u0275did"](26,49152,null,0,m.a,[],{formValidation:[0,"formValidation"]},null),(l()(),o["\u0275and"](16777216,null,null,1,null,k)),o["\u0275did"](28,16384,null,0,c.l,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),o["\u0275eld"](29,0,null,null,6,"div",[["class","d-flex justify-content-center m-3"]],null,null,null,null,null)),(l()(),o["\u0275eld"](30,0,null,null,2,"button",[["class","btn-clean mr-2"],["type","reset"]],null,[[null,"click"]],function(l,n,t){var o=!0;return"click"===n&&(o=!1!==l.component.clean()&&o),o},null,null)),(l()(),o["\u0275eld"](31,0,null,null,0,"i",[["class","fas fa-eraser"]],null,null,null,null,null)),(l()(),o["\u0275ted"](-1,null,[" Limpar"])),(l()(),o["\u0275eld"](33,0,null,null,2,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var o=!0;return"click"===n&&(o=!1!==l.component.registrar()&&o),o},null,null)),(l()(),o["\u0275eld"](34,0,null,null,0,"i",[["class","fas fa-check"]],null,null,null,null,null)),(l()(),o["\u0275ted"](35,null,[" Registrar ",""]))],function(l,n){var t=n.component;l(n,4,0,t.loading),l(n,7,0,t.submitForm),l(n,17,0,"20"),l(n,20,0,"matricula"),l(n,26,0,t.formValidation),l(n,28,0,null!=t.base64Image)},function(l,n){var t=n.component;l(n,2,0,t.title),l(n,5,0,o["\u0275nov"](n,9).ngClassUntouched,o["\u0275nov"](n,9).ngClassTouched,o["\u0275nov"](n,9).ngClassPristine,o["\u0275nov"](n,9).ngClassDirty,o["\u0275nov"](n,9).ngClassValid,o["\u0275nov"](n,9).ngClassInvalid,o["\u0275nov"](n,9).ngClassPending),l(n,15,0,o["\u0275nov"](n,17).maxlength?o["\u0275nov"](n,17).maxlength:null,o["\u0275nov"](n,22).ngClassUntouched,o["\u0275nov"](n,22).ngClassTouched,o["\u0275nov"](n,22).ngClassPristine,o["\u0275nov"](n,22).ngClassDirty,o["\u0275nov"](n,22).ngClassValid,o["\u0275nov"](n,22).ngClassInvalid,o["\u0275nov"](n,22).ngClassPending),l(n,33,0,t.loading),l(n,35,0,t.title)})}function w(l){return o["\u0275vid"](0,[(l()(),o["\u0275eld"](0,0,null,null,1,"app-registro",[],null,null,null,V,x)),o["\u0275did"](1,376832,null,0,y,[s.FormBuilder,I.a,b,p.a],null,null)],function(l,n){l(n,1,0)},null)}var N=o["\u0275ccf"]("app-registro",y,w,{},{},[]),S=t("4GxJ"),j=t("u0tD"),M=t("OaAl"),T=t("n6sq"),D=t("YFgC"),A=t("UVXo"),O=t("PCNd"),E=function(){return function(){}}();t.d(n,"RegistrosModuleNgFactory",function(){return U});var U=o["\u0275cmf"](u,[],function(l){return o["\u0275mod"]([o["\u0275mpd"](512,o.ComponentFactoryResolver,o["\u0275CodegenComponentFactoryResolver"],[[8,[e.b,e.a,e.l,e.i,e.j,a.a,N]],[3,o.ComponentFactoryResolver],o.NgModuleRef]),o["\u0275mpd"](4608,c.n,c.m,[o.LOCALE_ID,[2,c.D]]),o["\u0275mpd"](4608,s["\u0275angular_packages_forms_forms_j"],s["\u0275angular_packages_forms_forms_j"],[]),o["\u0275mpd"](4608,s.FormBuilder,s.FormBuilder,[]),o["\u0275mpd"](4608,f.k,f.q,[c.d,o.PLATFORM_ID,f.o]),o["\u0275mpd"](4608,f.r,f.r,[f.k,f.p]),o["\u0275mpd"](5120,f.a,function(l){return[l]},[f.r]),o["\u0275mpd"](4608,f.n,f.n,[]),o["\u0275mpd"](6144,f.l,null,[f.n]),o["\u0275mpd"](4608,f.j,f.j,[f.l]),o["\u0275mpd"](6144,f.b,null,[f.j]),o["\u0275mpd"](4608,f.g,f.m,[f.b,o.Injector]),o["\u0275mpd"](4608,f.c,f.c,[f.g]),o["\u0275mpd"](4608,S.w,S.w,[o.ComponentFactoryResolver,o.Injector,S.Y,S.x]),o["\u0275mpd"](4608,j.a,j.a,[]),o["\u0275mpd"](4608,M.a,M.a,[]),o["\u0275mpd"](4608,T.a,T.a,[]),o["\u0275mpd"](4608,S.r,D.a,[]),o["\u0275mpd"](4608,S.o,T.a,[]),o["\u0275mpd"](4608,b,b,[f.c]),o["\u0275mpd"](1073742336,c.c,c.c,[]),o["\u0275mpd"](1073742336,s["\u0275angular_packages_forms_forms_bc"],s["\u0275angular_packages_forms_forms_bc"],[]),o["\u0275mpd"](1073742336,s.FormsModule,s.FormsModule,[]),o["\u0275mpd"](1073742336,s.ReactiveFormsModule,s.ReactiveFormsModule,[]),o["\u0275mpd"](1073742336,f.e,f.e,[]),o["\u0275mpd"](1073742336,f.d,f.d,[]),o["\u0275mpd"](1073742336,S.s,S.s,[]),o["\u0275mpd"](1073742336,S.g,S.g,[]),o["\u0275mpd"](1073742336,S.C,S.C,[]),o["\u0275mpd"](1073742336,S.y,S.y,[]),o["\u0275mpd"](1073742336,A.TextMaskModule,A.TextMaskModule,[]),o["\u0275mpd"](1073742336,S.T,S.T,[]),o["\u0275mpd"](1073742336,i.b,i.b,[]),o["\u0275mpd"](1073742336,O.a,O.a,[]),o["\u0275mpd"](1073742336,I.m,I.m,[[2,I.s],[2,I.k]]),o["\u0275mpd"](1073742336,E,E,[]),o["\u0275mpd"](1073742336,u,u,[]),o["\u0275mpd"](256,f.o,"XSRF-TOKEN",[]),o["\u0275mpd"](256,f.p,"X-XSRF-TOKEN",[]),o["\u0275mpd"](256,"loadingConfig",{backdropBorderRadius:"3px"},[]),o["\u0275mpd"](1024,I.i,function(){return[[{path:":tipoRegistro",component:y}]]},[])])})}}]);